<% provide :page_header do %>
  <h1><span class="fa fa-paint-brush" aria-hidden="true"></span> <%= t('.header') %></h1>
<% end %>

<div class="row">
  <div class="col-md-12">
    <div class="card tabs" id="admin-set-controls">
      <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" href="#logo_image" role="tab" data-toggle="tab"><%= t('.tabs.logo') %></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#favicon" role="tab" data-toggle="tab"><%= t('.tabs.favicon') %></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#banner_image" role="tab" data-toggle="tab"><%= t('.tabs.banner_image') %></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#directory_image" role="tab" data-toggle="tab"><%= t('.tabs.directory_image') %></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#default_images" role="tab" data-toggle="tab"><%= t('.tabs.default_images') %></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#color" role="tab" data-toggle="tab"><%= t('.tabs.colors') %></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#font" role="tab" data-toggle="tab"><%= t('.tabs.fonts') %></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#css" role="tab" data-toggle="tab"><%= t('.tabs.custom_css') %></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#themes" role="tab" data-toggle="tab"><%= t('.tabs.themes') %></a>
        </li>
      </ul>
      <div class="tab-content">

        <div id="logo_image" class="tab-pane active">
          <div class="card">
            <%= render 'logo_image_form' %>
          </div>
        </div>

        <div id="favicon" class="tab-pane">
          <div class="card">
            <%= render 'favicon_form' %>
          </div>
        </div>

        <div id="banner_image" class="tab-pane">
          <div class="card">
            <%= render 'banner_image_form' %>
          </div>
        </div>

        <div id="directory_image" class="tab-pane">
          <div class="card">
            <%= render 'directory_image_form' %>
          </div>
        </div>

        <div id="default_images" class="tab-pane" data-alert="<%= I18n.t('hyrax.admin.appearances.show.forms.default_images.alert') %>">
          <div class="card">
            <%= render 'default_images_form' %>
          </div>
        </div>

        <div id="color" class="tab-pane">
          <div class="card">
            <%= render 'default_colors_form' %>
          </div>
        </div>

        <div id="font" class="tab-pane">
          <div class="card">
            <%= render 'default_fonts_form' %>
          </div>
        </div>

        <div id="css" class="tab-pane">
          <div class="card">
            <%= render 'custom_css_form' %>
          </div>
        </div>

        <div id="themes" class="tab-pane">
          <div class="card">
            <%= render 'theme_form' %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Immediately activate the correct tab based on URL hash to prevent flash
  (function() {
    var hash = window.location.hash;
    if (hash && hash.length > 1) {
      var tabId = hash.substring(1);
      var tabLink = document.querySelector('a[href="#' + tabId + '"]');
      var tabPane = document.getElementById(tabId);
      
      if (tabLink && tabPane) {
        // Remove active from default tab
        var defaultTabLink = document.querySelector('a[href="#logo_image"]');
        var defaultTabPane = document.getElementById('logo_image');
        if (defaultTabLink) defaultTabLink.classList.remove('active');
        if (defaultTabPane) defaultTabPane.classList.remove('active', 'show');
        
        // Activate the correct tab immediately
        tabLink.classList.add('active');
        tabPane.classList.add('active', 'show');
      }
    }
  })();
</script>
