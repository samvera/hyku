<%# OVERRIDE: HydraEditor 5.0.5 support dynamic labels and hints for custom worktypes %>
<%# Avoid NoMethod error when rendering partial in Collection or batch edit form %>
<%# Hide unwanted fields from the form %>
<% return if f.object.try(:hidden?, key) %>

<% record = f.object.model %>
<% controlled_vocab_config = controlled_vocabulary_options_for(key, record.class) %>

<% if controlled_vocab_config.present? %>
  <% if controlled_vocab_config[:type] == 'select' %>
    <%= render partial: 'records/edit_fields/controlled_vocab_select', locals: { f: f, key: key, controlled_vocab_config: controlled_vocab_config, record: record } %>
  <% elsif controlled_vocab_config[:type] == 'autocomplete' %>
    <%= render partial: 'records/edit_fields/controlled_vocab_autocomplete', locals: { f: f, key: key, controlled_vocab_config: controlled_vocab_config, record: record } %>
  <% end %>
<% elsif f.object.multiple? key %>
  <%= render partial: 'records/edit_fields/default_multi_value', locals: { f: f, key: key, record: record } %>
<% else %>
  <%= render partial: 'records/edit_fields/default_single_value', locals: { f: f, key: key, record: record } %>
<% end %>
