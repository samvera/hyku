<%# Override Hyrax v5.0.3 to use multiple analytics configs, one app wide one and one tenant override %>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=<%= Hyrax::Analytics.config.analytics_id %>"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  <% if Hyrax::Analytics.config.analytics_id.present? %>
    gtag('config', '<%= Hyrax::Analytics.config.analytics_id %>');
  <% end %>

  <% if current_account.settings[:google_analytics_id].present? &&
        current_account.settings[:google_analytics_id] != Hyrax::Analytics.config.analytics_id %>
    gtag('config', '<%= current_account.settings[:google_analytics_id] %>');
  <% end %>

  window.analytics = gtag;
</script>
<meta name="analytics-provider" content="ga4">
