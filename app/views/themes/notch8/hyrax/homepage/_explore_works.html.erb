<%# View for featured works when user is logged out %>
<%# Featured works when logged in: app/views/hyrax/homepage/_featured_fields.html.erb %>
<div>
  <div class="featured-item-title">
    <span class="sr-only"><%= t('hyrax.homepage.featured_works.document.title_label') %></span>
    <h3>
      <%= link_to [main_app, featured], data: { turbolinks: block_valkyrie_redirect? } do %>
        <%= render_thumbnail_tag(featured, {alt: "#{featured.title.first.to_s} #{ t('hyrax.homepage.admin_sets.thumbnail')}", class: "notch8-explore-works-thumbnail" }, {suppress_link: true}) + featured.title.first %>
      <% end %>
    </h3>
  </div>
  <div class="featured-field">
    <% if featured.resource_type.present? %>
      <span class="featured-label"><%= markdown(featured.resource_type&.first) %></span>
    <% end %>
  </div>
  <% if Flipflop.home_page_recent_document_show_depositor? %>
    <div class="featured-field featured-item-depositor">
      <span class="featured-label"><%= t('hyrax.homepage.featured_works.document.depositor_label') %>:</span> <%= link_to_profile(featured.depositor&.first) || t('hyrax.homepage.featured_works.document.depositor_missing') %>
    </div>
  <% end %>
  <% if Flipflop.home_page_recent_document_show_keyword? %>
    <div class="featured-field featured-item-keywords">
      <span class="featured-label"><%= t('hyrax.homepage.featured_works.document.keyword_label') %>:</span> <%= link_to_facet_list(featured.keyword, 'keyword', t('hyrax.homepage.featured_works.document.keyword_missing')) %>
    </div>
  <% end %>
  <div class="featured-field">
    <% text = featured.description&.first || featured.abstract&.first %>
    <% if text.present? %>
      <%= markdown(truncate_description(text)) %>
    <% else %>
      <%= t('hyrax.homepage.featured_works.document.description_missing') %>
    <% end %>
  </div>
</div>

